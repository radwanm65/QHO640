<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Routing</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/web-dev-2022-notes/assets/css/0.styles.082ab4f7.css" as="style"><link rel="preload" href="/web-dev-2022-notes/assets/js/app.533af2e4.js" as="script"><link rel="preload" href="/web-dev-2022-notes/assets/js/2.dc3a9f95.js" as="script"><link rel="preload" href="/web-dev-2022-notes/assets/js/36.e9443ce3.js" as="script"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/10.ab1164cb.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/11.d1dc547c.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/12.175eb028.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/13.19cf8fc5.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/14.cf89cf35.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/15.a43a422b.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/16.531a69b4.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/17.d3da4c0b.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/18.86fcf28e.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/19.c78b6bae.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/20.4c8cdc86.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/21.4bc413c1.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/22.1ecbd3ce.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/23.500ca56e.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/24.8832781e.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/25.9113dd73.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/26.9d001e96.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/27.77ebcbaf.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/28.c0e6e8f3.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/29.bb340f0e.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/3.fdf3985a.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/30.a09d2f35.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/31.bb9b5555.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/32.c3afc18f.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/33.cdc7b86c.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/34.14f1c7f7.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/35.b426ef2a.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/37.14cad322.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/38.05b01327.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/39.28e299d9.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/4.e77bc45c.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/40.397fecf5.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/41.b9a74a19.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/42.f0dd2bc1.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/43.1dd708e5.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/44.2af3b1b3.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/45.ef0305f7.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/46.73303f18.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/5.e5b5458e.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/6.28ea1ad6.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/7.8bcd5d4c.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/8.e697c017.js"><link rel="prefetch" href="/web-dev-2022-notes/assets/js/9.b6918f12.js">
    <link rel="stylesheet" href="/web-dev-2022-notes/assets/css/0.styles.082ab4f7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/web-dev-2022-notes/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Assessments</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 1 - The latest version of JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 2 - Introducing React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 3 - Loops</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 4 - Styles</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 5 - Design Thinking Workshop</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Week 6 - State And Routes</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web-dev-2022-notes/sessions/week_6/lecture.html" class="sidebar-link">Lecture (Start Here)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/web-dev-2022-notes/sessions/week_6/" aria-current="page" class="active sidebar-link">Routing</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-dev-2022-notes/sessions/week_6/#session-dependencies" class="sidebar-link">Session Dependencies</a></li><li class="sidebar-sub-header"><a href="/web-dev-2022-notes/sessions/week_6/#creating-an-application-with-multiple-views" class="sidebar-link">Creating an application with multiple views</a></li><li class="sidebar-sub-header"><a href="/web-dev-2022-notes/sessions/week_6/#task-1-restructuring-our-application" class="sidebar-link">Task 1 - Restructuring our application</a></li><li class="sidebar-sub-header"><a href="/web-dev-2022-notes/sessions/week_6/#configuring-routing" class="sidebar-link">Configuring Routing</a></li><li class="sidebar-sub-header"><a href="/web-dev-2022-notes/sessions/week_6/#task-2-installing-and-configuring-the-react-router" class="sidebar-link">Task 2 - Installing and configuring the react-router</a></li><li class="sidebar-sub-header"><a href="/web-dev-2022-notes/sessions/week_6/#further-routing" class="sidebar-link">Further Routing</a></li><li class="sidebar-sub-header"><a href="/web-dev-2022-notes/sessions/week_6/#task-3-setting-up-links" class="sidebar-link">Task 3 - Setting Up Links</a></li><li class="sidebar-sub-header"><a href="/web-dev-2022-notes/sessions/week_6/#logic-base-on-the-route" class="sidebar-link">Logic base on the route</a></li><li class="sidebar-sub-header"><a href="/web-dev-2022-notes/sessions/week_6/#task-4-using-the-react-router-hooks" class="sidebar-link">Task 4 - Using the react-router hooks</a></li><li class="sidebar-sub-header"><a href="/web-dev-2022-notes/sessions/week_6/#further-react-hooks" class="sidebar-link">Further React Hooks</a></li><li class="sidebar-sub-header"><a href="/web-dev-2022-notes/sessions/week_6/#task-5-using-useeffect" class="sidebar-link">Task 5 - Using UseEffect</a></li><li class="sidebar-sub-header"><a href="/web-dev-2022-notes/sessions/week_6/#home-study" class="sidebar-link">Home Study</a></li><li class="sidebar-sub-header"><a href="/web-dev-2022-notes/sessions/week_6/#task-7-create-a-404-page" class="sidebar-link">Task 7 - Create a 404 page</a></li><li class="sidebar-sub-header"><a href="/web-dev-2022-notes/sessions/week_6/#task-8-conditional-rendering" class="sidebar-link">Task 8 - Conditional Rendering</a></li><li class="sidebar-sub-header"><a href="/web-dev-2022-notes/sessions/week_6/#task-9" class="sidebar-link">Task 9</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 7 -  Forms,Validation and Conditional Rendering</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 8 -  Firebase Authentication and Custom Hooks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 9 -  Managing Data In Firebase</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 10 -  Hosting, Rules and Cloud Functions</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="routing"><a href="#routing" class="header-anchor">#</a> Routing</h1> <div class="custom-block warning"><p class="custom-block-title">session dependencies</p> <h2 id="session-dependencies"><a href="#session-dependencies" class="header-anchor">#</a> Session Dependencies</h2> <p>[Make sure that you have the latest of the ongoing class, fitness tracker, project. <strong>The notes for this week refer extensively to this project</strong>](<code>git clone -b week-4-solutions https://github.com/joeappleton18/running-contemp-web-app-solutions.git</code>).</p></div> <div class="custom-block warning"><p class="custom-block-title">reading</p> <h3 id="essential-reading"><a href="#essential-reading" class="header-anchor">#</a> Essential Reading 📕</h3> <p><a href="https://reacttraining.com/react-router/web/guides/quick-start" target="_blank" rel="noopener noreferrer">React Router<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://survivejs.com/react/advanced-techniques/structuring-react-projects/" target="_blank" rel="noopener noreferrer">Structuring a Larger React Application<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://reactjs.org/docs/hooks-effect.html" target="_blank" rel="noopener noreferrer">React documentation on the use effect hook<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <div class="custom-block warning"><p class="custom-block-title">optional reading</p> <p>Optional advanced reading:</p> <p><a href="https://overreacted.io/a-complete-guide-to-useeffect/" target="_blank" rel="noopener noreferrer">An in-depth guide to the use effect hook. A fantastic blog post by Dan Abramov - a react core team member.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>(optional)</p></div> <p>This week is going to be particularly interesting You are going to be learning how to implement routing into your application. This will allow us to create the effect of having multiple pages in our single page application.</p> <h2 id="creating-an-application-with-multiple-views"><a href="#creating-an-application-with-multiple-views" class="header-anchor">#</a> Creating an application with multiple views</h2> <p>Let's reconsider our goal tracking application. Currently, we only have one view - the dash. As such, we have placed all of the related dash components in the main <code>/src/App.js</code> component. This works - as long as we only have a single view. However, moving forward, we are going to need multiple views. We need to re-structure our application to facilitate this requirement.</p> <p>Structuring an ever-evolving React application can be a complex undertaking. The complexity comes from the fact there is no right or wrong way to do things - React is very unopinionated.</p> <p>There are patterns you can use (see <a href="https://survivejs.com/react/advanced-techniques/structuring-react-projects/" target="_blank" rel="noopener noreferrer">Structuring a Larger React Application<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>). However, ultimately, how to structure an application is down to the developer. Dan Abramov, React core developer and the creator of Redux, recommends, &quot;move files around until it feels right&quot;. This is all well and good for experienced developers; however, as beginners, I think we need more in the way of guidance. As such, I am going to suggest a structure that has worked well for me in the past.</p> <h3 id="application-structure"><a href="#application-structure" class="header-anchor">#</a> Application Structure</h3> <p>We need to create an application that can serve multiple views, e.g.:</p> <ul><li>Dash (this is the default and our current view)</li> <li>Join</li> <li>Login</li> <li>Profile</li></ul> <p>The above views can be represented in the following file structure:</p> <div class="language-terminal extra-class"><pre class="language-text"><code>|-src/
   |-Components
     |- CheckinComment.js
     |- DaysCompleted.js
     ...
   |-Views/
      |- Checkin.js
      |- Dash.js
      |- Join.js
      |- Profile.js
</code></pre></div><p>Using the above layout convention we compose components into larger views. I like this line of thinking as it represents the structure, from a user perspective, of our application.</p> <p>Let's explore this idea further by restructuring our existing application.</p> <div class="custom-block tip"><p class="custom-block-title">task 1</p> <h2 id="task-1-restructuring-our-application"><a href="#task-1-restructuring-our-application" class="header-anchor">#</a> Task 1 - Restructuring our application</h2> <p>The goal of this task is to restructure our application to conform to the above structure. Complete the following steps:</p> <p>Create the file <code>src/Views/Dash.js</code></p> <p>Bootstrap it as a blank component. You can use the following code:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Dash</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span> Dash <span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Dash<span class="token punctuation">;</span>
</code></pre></div><p>Next, consider how you could extract the Dash view elements out of <code>App.js</code> and into <code>Dash.js</code>. Once done, <code>App.js</code> should look like this:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>ThemeProvider theme<span class="token operator">=</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Header <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>GlobalStyles <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Dash <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>ThemeProvider<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>hint:</strong> you will need to pass the mocked <code>checkins</code> array into the new <code>Dash</code> component as a <code>Prop</code>.</p> <p>Since we are going to be using a router to serve up different views, it would be handy to have more than just a single view. With this in mind, set up the below View components, that simply render an <code>&lt;h1&gt; &lt;/h1&gt;</code> containing the name of the component e.g.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">-</span> Views <span class="token operator">/</span>
    <span class="token operator">-</span> Checkin<span class="token punctuation">.</span>js 
    <span class="token operator">-</span> Join<span class="token punctuation">.</span>js 
    <span class="token operator">-</span> Login<span class="token punctuation">.</span>js 
    <span class="token operator">-</span> Profile<span class="token punctuation">.</span>js<span class="token punctuation">;</span>
</code></pre></div></div> <h2 id="configuring-routing"><a href="#configuring-routing" class="header-anchor">#</a> Configuring Routing</h2> <p>Now we have a workable application structure, we can consider how we can conditionally serve up different views based on a given URL - or even application state. The concept of routing provides us with the functionality that we are looking for. However, React does not come with a router; as such, we need to install one.</p> <p>While there are several Routing possibilities, the <a href="https://reacttraining.com/react-router/web/guides/quick-start" target="_blank" rel="noopener noreferrer">React Router<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, provided by React Training, is by far the most popular Let's install and configure it:</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <h2 id="task-2-installing-and-configuring-the-react-router"><a href="#task-2-installing-and-configuring-the-react-router" class="header-anchor">#</a> Task 2 - Installing and configuring the react-router</h2> <p>The react-router is simple to install and configure:</p> <ul><li>run <code>npm install react-router-dom@5</code></li> <li>next, we need to wrap our entire application in the <code>&lt;Router&gt;</code> component.</li> <li>open <code>src/index.js</code> and wrap your <code>&lt;App&gt;</code> in the <code>&lt;Router&gt;</code> component. Your code should then resemble the following:</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;reset-css/reset.css&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token keyword">as</span> Router <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> serviceWorker <span class="token keyword">from</span> <span class="token string">&quot;./serviceWorker&quot;</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// If you want your app to work offline and load faster, you can change</span>
<span class="token comment">// unregister() to register() below. Note this comes with some pitfalls.</span>
<span class="token comment">// Learn more about service workers: https://bit.ly/CRA-PWA</span>
serviceWorker<span class="token punctuation">.</span><span class="token function">unregister</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="adding-routes"><a href="#adding-routes" class="header-anchor">#</a> Adding Routes</h3> <p>We can now start adding routes. Open <code>src/App.js</code> and import the following dependencies:</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  Switch<span class="token punctuation">,</span>
  Route<span class="token punctuation">,</span>
  useLocation
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p>Also, import all of your views into your App component.</p></li> <li><p>We can now add routes as follows:</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">...</span>
<span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>ThemeProvider theme<span class="token operator">=</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Header  <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>GlobalStyles <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>Route exact path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Dash checkins<span class="token operator">=</span><span class="token punctuation">{</span>checkins<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/join&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Join <span class="token operator">/</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/profile&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Profile <span class="token operator">/</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/checkin&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Checkin <span class="token operator">/</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>ThemeProvider<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>That's it - navigate to http://localhost:3000/join to test out your solution.</p> <p>In the above example, the <code>&lt;Switch /&gt;</code> component allows us to declaratively specify routing logic. We do this by using the <code>&lt;Route&gt;</code> child component. Notice how it has the prop <code>path</code> e.g. <code>&lt;Route path=&quot;/join&quot;&gt;</code> the router will <strong>best match</strong> the browser URL against this path. If we want, we can override the best match functionality by using the prop <code>exact</code> - e.g. we've done this for the route path <code>/</code>.</p></div> <h2 id="further-routing"><a href="#further-routing" class="header-anchor">#</a> Further Routing</h2> <h3 id="dealing-with-links"><a href="#dealing-with-links" class="header-anchor">#</a> Dealing With Links</h3> <p>Consider our menu that currently lives in <code>src/Components/Header.js</code>. Notice how our menu links are not operational. React-router provides us with a <code>&lt;Link&gt;</code> component, which can be used in replacement of traditional <code>&lt;a&gt;</code> tags. Let's set up some links:</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <h2 id="task-3-setting-up-links"><a href="#task-3-setting-up-links" class="header-anchor">#</a> Task 3 - Setting Up Links</h2> <ul><li>Within <code>src/Components/Header.js</code> import <code>react-router</code>'s <code>&lt;Link&gt;</code> component:</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>We can now set up our links as follows:</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">&quot;/&quot;</span><span class="token operator">&gt;</span> Dash <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
</code></pre></div><ul><li>Complete this task by setting up a link for profile</li></ul></div> <h2 id="logic-base-on-the-route"><a href="#logic-base-on-the-route" class="header-anchor">#</a> Logic base on the route</h2> <p>There will be occasions when you want to make logical decisions based on a routing event or state. <a href="https://reacttraining.com/react-router/web/api/Hooks" target="_blank" rel="noopener noreferrer">react-router has several hooks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> that allow us to access the internal functionality of the router. For the next task, let's see how we could use a hook to enhance our menu.</p> <h2 id="task-4-using-the-react-router-hooks"><a href="#task-4-using-the-react-router-hooks" class="header-anchor">#</a> Task 4 - Using the react-router hooks</h2> <p>Consider the menu component in <code>src/Components/Header.js</code> each menu item is constructed using the following styled component <code>&lt;StyledLi active={true}&gt; &lt;Link to=&quot;/&quot;&gt; Dash &lt;/Link&gt; &lt;/StyledLi&gt;</code>. Currently, the active link style is conditional based on the prop <code>active</code>. At the moment, to demonstrate this functionality, the dash link is simply set to active - at all times. However, we want active to be conditional based on the current route.</p> <p>React-router provides a <code>useLocation</code> hook that can allow us to achieve the above functionality. Let's use it:</p> <ul><li>Add useLocation to the <code>react-router-do-dom</code> import list: <code>import {Link, useLocation} from &quot;react-router-dom&quot;;</code></li> <li>We can now invoke the hook by calling <code>useLocation</code> at the top of our menu component like this:</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Menu</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> onClick <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  <span class="token keyword">const</span> location <span class="token operator">=</span> <span class="token function">useLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">...</span><span class="token operator">...</span>
</code></pre></div><ul><li>The current location is now avalible to us in <code>location.pathname</code></li> <li>Can you use location to highlight the active link? Do this to complete the task
:::</li></ul> <h2 id="further-react-hooks"><a href="#further-react-hooks" class="header-anchor">#</a> Further React Hooks</h2> <p>Currently, when we change location the menu remains open. From a usability perspective, this is not ideal - since the user has completed their required action we should close the menu. To achieve this functionality we need to be able to listen to the location and act when it changes. The <code>useEffect</code> react hook allows us to do this.</p> <p>Remember, <a href="https://reactjs.org/docs/hooks-effect.html" target="_blank" rel="noopener noreferrer">&quot;Hooks are a new addition in React 16.8. They let you use state and other React features without writing a class.&quot;<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>We can use the <code>useEffect</code> hook to run an effect whenever the state of our component changes. For now, you can just use this hook in a rote learning fashion. However, hooks, specifically the useEffect, are very powerful and I recommend conducting research in your own time (<a href="https://overreacted.io/a-complete-guide-to-useeffect/" target="_blank" rel="noopener noreferrer">read<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://reactjs.org/docs/hooks-effect.html" target="_blank" rel="noopener noreferrer">read<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>).</p> <p>Below is an example of a useEffect hook:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">someComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span><span class="token string">&quot;You clicked ${count} times&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token comment">/*...*/</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>As I said, we, unfortunately, do not have the time to explore effect hooks in-depth. However, we can briefly touch on the above example.</p> <p><code>UseEffect</code> is a function that takes in, as an argument, a function and an optional array. The function is the effect and will be run every time the component state updates. The second optional argument - the array - limits the effect to run only on specific state updates. <strong>As such, in the above example, the effect will only run when the count state updates</strong>.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <h2 id="task-5-using-useeffect"><a href="#task-5-using-useeffect" class="header-anchor">#</a> Task 5 - Using UseEffect</h2> <p>Can you use the useEffect hook within your menu component to watch the <code>location</code> variable? When the location changes you should close the menu?</p></div> <h2 id="home-study"><a href="#home-study" class="header-anchor">#</a> Home Study</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <h2 id="task-7-create-a-404-page"><a href="#task-7-create-a-404-page" class="header-anchor">#</a> Task 7 - Create a 404 page</h2> <p>Can you work out how to set up a 404 page if a route does not exist?</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <h2 id="task-8-conditional-rendering"><a href="#task-8-conditional-rendering" class="header-anchor">#</a> Task 8 - Conditional Rendering</h2> <p>Work out how to use the <code>useLocation</code> hook to hide the <code>&lt;Header /&gt;</code> on the login/sign up page</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <h2 id="task-9"><a href="#task-9" class="header-anchor">#</a> Task 9</h2> <p>Can you hoist the menu state up to app? If you do this you should be able to add the functionality to close the menu if a user clicks away from it on the main part of the application.</p></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/web-dev-2022-notes/sessions/week_6/lecture.html" class="prev">
        Lecture (Start Here)
      </a></span> <span class="next"><a href="/web-dev-2022-notes/sessions/week_7/lecture.html">
        Lecture (Start Here)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/web-dev-2022-notes/assets/js/app.533af2e4.js" defer></script><script src="/web-dev-2022-notes/assets/js/2.dc3a9f95.js" defer></script><script src="/web-dev-2022-notes/assets/js/36.e9443ce3.js" defer></script>
  </body>
</html>
